<script src = '../other-peoples/localforage.js'></script>
<script>

//ResultFirefox:0.28
//ResultChrome:0.063
//ResultIE:0.33
//ResultUnits:ms/write

var whenStarted, whenStopped;

var i=-1;

function iter() {
  if (i==9999) {
    whenStopped = performance.now();
    localforage.getItem("Foo" + i%10, function(e,v) {
      if (v==i)
        document.getElementById('result').innerHTML = whenStopped-whenStarted;
      else 
        document.getElementById('result').innerHTML = "Failed";
    })
  }
  else {
    i++;
    localforage.setItem("Foo" + i%10, i, function() { iter(); });
  }
}

function go() {
  localforage.setDriver(localforage.LOCALSTORAGE);
  var d_id = localforage.supports('asyncStorage');
  var d_ws = localforage.supports('webSQLStorage');
  var d_ls = localforage.supports('localStorageWrapper');
  document.getElementById('drivers').innerHTML=("Supports: indexedDB:"+d_id + ", webSQL:" + d_ws +", localStorage:" + d_ls);
  whenStarted = performance.now();
  iter();
}
</script>
<body onLoad='go()'>
  <h3>Write one of 10 integers 10000 times over with localForage</h3>
  <p>This is not using arrays (rhaboo's forte.) Each integer is a separate entry.
  <div id='drivers'></div>
  <p>Test took <span id='result'>...</span> ms</p>
</body>

