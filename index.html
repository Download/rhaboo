<!DOCTYPE html>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
<meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9, minimum-scale=0.9" />
<html class='no-js'>
  <title>Rhaboo : JS Persistence Library</title>  
  <link rel="shortcut icon" type="image/png" href="logo.png" />

  <style>
html > *            { font-family: Arial !important; color: #502000; background-color: white;}
table, tr                  { vertical-align: top;}
.cssvwunit     .banner {  vertical-align: bottom; font-size: 15vw; font-weight:bold; margin-left:0px;text-align:right;}
.no-cssvwunit  .banner         {  vertical-align: bottom; font-size: 75px; font-weight:bold; margin-left:0px;text-align:right;}
.cssvwunit .subbanner1           {  vertical-align: bottom; font-size: 2.5vw; margin-left:0.30em;text-align:right;}
.no-cssvwunit .subbanner1           {  vertical-align: bottom; font-size: 13px; margin-left:0.30em;text-align:right;}
.cssvwunit .subbanner2           {  vertical-align: bottom; font-size: 2.5vw; text-align:right;}
.no-cssvwunit .subbanner2           {  vertical-align: bottom; font-size: 13px; text-align:right;}
.cssvwunit .topmenuitem     {  text-align:center; vertical-align: bottom; font-size: 3.5vw; margin-left:0.30em;}
.no-cssvwunit .topmenuitem     {  text-align:center; vertical-align: bottom; font-size: 18px; margin-left:0.30em;}
.cssvwunit .secmenuitem          {  text-align:center; vertical-align: bottom; font-size: 2.5vw; margin-left:0.30em;}
.no-cssvwunit .secmenuitem         {  text-align:center; vertical-align: bottom; font-size: 13px; margin-left:0.30em;}
.cssvwunit .splash, .cssvwunit th                 { text-align:center; font-size: 2.5vw;}
.no-cssvwunit .splash, .no-cssvwunit th                  { text-align:center; font-size: 18px;}
.cssvwunit .splashof3               { font-weight:bold; text-align:center; font-size: 3vw;}
.no-cssvwunit .splashof3              { font-weight:bold; text-align:center; font-size: 15px;}
.cssvwunit .detailof3                 { padding-left:1vw; padding-right:1vw; text-align:center; font-size: 1.5vw;}
.no-cssvwunit .detailof3                 { padding-left:1vw; padding-right:1vw; text-align:center; font-size: 11px;}
.cssvwunit pre, 
.cssvwunit p, 
.cssvwunit dt, 
.cssvwunit dd, 
.cssvwunit li, 
.cssvwunit td          { font-size:1.5vw}
.no-cssvwunit pre, 
.no-cssvwunit p, 
.no-cssvwunit li, 
.no-cssvwunit dt, 
.no-cssvwunit dd, 
.no-cssvwunit td          { font-size:11px}

dt { font-weight: bold;}

.boxshadow .boxof3                 { box-shadow: 5px 8px 18px 2px #502000; -webkit-box-shadow: 5px 10px 15px #502000; -moz-box-shadow: 5px 10px 15px #502000; width:30% }
.menu               {  table-layout: fixed; background-color:#ffffa0; }
a.plain:link { text-decoration: none; color: #502000;} 
a.plain:visited { text-decoration: none; color: #502000;} 
a.plain:hover { text-decoration: none; color: #502000;} 
a.plain:active { text-decoration: none; color: #502000;} 

#api td { padding-left: 10px; padding-right: 10px; }
#api dt {font-weight:normal; }
  </style>

  <script src='modernizr.custom.42785.js'></script>
  <script>

function vis(ob, v) {
  if (ob) {
    ob.style.fontWeight=v?"bold":"";
    ob.style.textShadow=v?"-1px 2px #C0C060":"";
    document.getElementById(ob.getAttribute('id').toUpperCase()).style.display=v?"block":"none";
  }
}

var showing1;
function show1(x) {
  vis(showing1, false);
  showing1 = x;
  vis(showing1, true)
}

var showing2;
function show2(x) {
  vis(showing2, false);
  showing2 = x;
  vis(showing2, true)
}

  </script>

<body onload="show1(document.getElementById('about')); show2(document.getElementById('demos')); ">

    <table width='100%'>
      <tr width='100%'>
        <td width='30%'> <img src='logo.png' width='100%'/> </td>
        <td style='vertical-align: bottom;'>
          <table width='100%'>
            <tr><td class='subbanner1'>Makes JavaScript objects persistent...</td></tr>
            <tr><td class='subbanner2'>...without learning a new API.</td></tr>
            <tr><td class='banner'>rhaboo</td></tr>
          </table>
          <!--
            <span class='subbanner1'>Makes JavaScript objects persistent...</span><br/>
            <span class='subbanner2'>...without learning a new trick.</span><br/>
            <span class='banner'>rhaboo</span><br/>
          -->
        </td>
      </tr>
    </table>
    <table  class='menu' width='100%'><tr width='100%'>
        <td class='topmenuitem' id='about' onClick='show1(this);'>about</td>
        <td class='topmenuitem' id='docs' onClick='show1(this);'>docs</td>
        <td class='topmenuitem' id='faq' onClick='show1(this);'>faq</td>
        <td class='topmenuitem'><a class='topmenuitem plain' href="https://github.com/adrianmay/rhaboo">github</a></td>
        <!--
        <td class='topmenuitem' onClick='window.location.href="https://github.com/adrianmay/rhaboo"'>github</td>
        -->
      </tr>
    </table>
    <div id='ABOUT' style='display:none;'> 
      <p class='splash'>The easiest, fastest and most portable persistence solution on the web</p>
    <table style='vertical-align:top;' width='100%'>
      <tr style='vertical-align:top;'>
        <td></td>
        <td class='boxof3'>
          <p class='splashof3'>Easy</p>
          <p class='detailof3'>Makes regular JS objects persistent. <br/><br/>No new storage paradigm to learn.
        </td>
        <td></td>
        <td class='boxof3'>
          <p class='splashof3'>Full</p>
          <p class='detailof3'>Stores objects nested to any level. <br/><br/>All standard array functions work persistently. <br/><br/>Supports non-numeric properties of arrays.
        </td>
        <td></td>
        <td class='boxof3'>
          <p class='splashof3'>Fast</p>
          <p class='detailof3'>Stores components of objects separately rather than just stringifying and parsing the whole thing at every little change. <br/><br/>Writes to disk in a background thread.
        </td>
        <td></td>
      </tr></table>
        <br/>
      <table style='vertical-align:top;'><tr style='vertical-align:top;'>
        <td></td>
        <td></td>
        <td class='boxof3'>
          <p class='splashof3'>Portable</p>
          <p class='detailof3'>Only relies on localStorage.
        </td>
        <td></td>
        <td class='boxof3'>
          <p class='splashof3'>Reliable</p>
          <p class='detailof3'>Our automatically generated test script contains roughly 40,000 assertions.
        </td>
        <td></td>
        <td></td>
      </tr>
    </table>     
     
    <br/>
     <p>For instance:
      <pre>
&lt;script src='rhaboo.min.js'&gt;&lt;/script&gt;
&lt;script&gt;
  <span style='color:green;'>//Open a persistent object called 'Some name'...</span>
  <b>var store = new Rhaboo.Persistent('Some name');</b>
  <span style='color:green;'>//If it has a property called 'count' then increment it, </span>
  <span style='color:green;'>//otherwise initialise it to 1...</span>
  <b>store.write('count', store.count ? store.count+1 : 1);</b>
&lt;/script&gt;
&lt;body onLoad='
  document.getElementById("count").
    <span style='color:green;'>//Use it like a normal object...</span>
    <b>innerHTML = store.count</b>;'&gt;
  &lt;p&gt;You loaded this page &lt;span id='count'&gt;&lt;/span&gt; times.
&lt;/body&gt;
      </pre>
      <p>So having made <code>store</code> with that constructor, it behaves just like a normal object except that wherever you'd normally write <code>store.key=val</code> you should write <code>store.write('key', val)</code> instead. Furthermore, any objects or arrays inside a persistent one also have that <code>write</code> function: 
      <br/>
      <br/>
      <pre>
store.write('somethingfancy', {
  one: ['man', 'went'],
  2: 'mow',
  went: [  2, { mow: ['a', 'meadow' ] }, {}  ]
});

store.somethingfancy.went[1].mow.write(1, 'lawn');
      </pre>
      <p>That is quite literally all you need to know.

      <table width='100%'>
        <tr>
          <td></td>
          <td class='boxof3'>
            <a class='download plain' href="https://raw.githubusercontent.com/adrianmay/rhaboo/master/rhaboo.min.js" download><div class='splashof3' style='padding-top:50px; padding-bottom:50px; '>Download</div></a>
          <p class='detailof3'>rhaboo.min.js
          </td>
          <td></td>
        </tr>
      </table>
      <br/>
      <p class='splash'>Free and Open Source.</p>
      <br/>
    </div>
    <div id='DOCS' style='display:none;'> 
      <table  class='menu' width='100%'><tr width='100%'>
          <td class='secmenuitem' id='install' onClick='show2(this);'>install</td>
          <td class='secmenuitem' id='demos' onClick='show2(this);'>demos</td>
          <td class='secmenuitem' id='reference' onClick='show2(this);'>reference</td>
          <td class='secmenuitem' id='internals' onClick='show2(this);'>internals</td>
          <td class='secmenuitem' id='tests' onClick='show2(this);'>tests</td>
        </tr>
      </table>
      <div id='INSTALL' style='display:none;'> 
        <p>There are several options:
        <ol>
          <li>Just grab <a href='https://raw.githubusercontent.com/adrianmay/rhaboo/master/rhaboo.min.js'>rhaboo.min.js</a> and put the script tag in your document.<br/><br/></li>         
          <li>In the directory where your html is:<pre>npm install rhaboo</pre> then write a script tag pointing at node_modules/rhaboo/rhaboo.min.js<br/><br/></li>         
            <li>If you want to edit and build rhaboo then do this:<pre>
npm install grunt rhaboo
cd node_modules/rhaboo
npm install q grunt-contrib-uglify grunt-browserify seedrandom ajon
grunt    # be patient with this
            </pre></li>         
        </ol>
      </div>
      <div id='DEMOS' style='display:none;'> 
        <br/><a class='subbanner1 plain' href='demos/counter.html'>Reload counter</a> 
        <br/><a class='subbanner1 plain' href='demos/cliches.html'>Simple database</a> 
      </div>
      <div id='REFERENCE' style='display:none;'> 
        <table id='api' width='100%'>
          <tr><td colspan=4><hr/></td></tr>
          <tr>
            <th width='33%'>API</th>
            <th>Description</th>
            <th>Parameters</th>
            <th>Returns</th>
          </tr>
          <tr><td colspan=4><hr/></td></tr>
          <tr>
            <td><code>new Rhaboo.Persistent(name)</code></td>
            <td>Constructor of root persistent object. Best performance is obtained if there's only one of these. The library looks for entries in localStorage corresponding with the passed name and loads any previously persisted data into the returned object. If no data is found, a mostly empty object is returned, mostly meaning that it just has a property called _rhaboo which is used for internal purposes.</td>
            <td>
              <dt>name:</dt><dd>Any text name that's not likely to be the same as any other.</dd> 
            </td>
            <td>The persistent object.</td>
          </tr>
          <tr><td colspan=4><hr/></td></tr>
          <tr>
            <td><code>Object.prototype.write(key, val)</code></td>
            <td>Persistent replacement for = operator. <code>store.write('key',val)</code> is equivalent to <code>store.key=val </code>except with persistence. Can be applied to objects inside the root persistent as well as the root persistent itself.</td>
            <td>
              <dt>this:</dt><dd>The object whose property we're adding or changing</dd> 
              <dt>key:</dt><dd>The property name within <code>this</code></dd> 
              <dt>val:</dt><dd>The new value for the property. Any javascript type is acceptable, but functions and regexes will not persist.</dd> 
            </td>
            <td><code>this</code></td>
          </tr>
          <tr><td colspan=4><hr/></td></tr>
          <tr>
            <td><code>Object.prototype.kill(key)</code></td>
            <td>Persistent equivalent of <code>delete object.key</code>. Completely removes a property. This is not the same as setting it to undefined. Don't use it on arrays. Use splice instead.</td>
            <td>
              <dt>this:</dt><dd>The object whose property we're adding or changing</dd> 
              <dt>key:</dt><dd>The property name within <code>this</code></dd> 
            </td>
            <td><code>this</code></td>
          </tr>
          <tr><td colspan=4><hr/></td></tr>
        </table>
      </div>
      <div id='TESTS' style='display:none;'> 
        <!--
        <iframe width='100%' height='10000px' src='http://adrianmay.github.io/rhaboo/generate-tests/generated-pages/page.0.html'></iframe>
        -->
      </div>
      <div id='INTERNALS' style='display:none;'>
        <p>How it works
      </div>
    </div>
    <div id='FAQ' style='display:none;'> 
      <dl>
        <dt>Why is it called rhaboo? </dt>
        <dd><p>Because nothing else is, not in any language. </dd>
        <dt>Why an owl?</dt>
        <dd><p>Because proboscis monkeys aren't that pretty after all.</dd>
        <br/>
        <dt>What licence is it released under?</dt>
        <dd><p>MIT</dd>
        <dt>How do I get support?</dt>
        <dd><p>You can create an issue on github or ask a question on stackoverflow. Please create the <code>rhaboo</code> tag if you can.</dd>
        <br/>
        <dt>How fast is it?</dt>
        <dd><p>Proper performance tests are in the pipeline, but it must be very fast because localStorage is a simple mechanism and it's being used in a very efficient way. However, those array functions like reverse and sort which change the whole thing are a bit slow right now.</dd>
        <dt>What can't it do?</dt>
        <dd><p>Function-valued and regex-valued properties of objects are ignored. If you want regexes just ask. You can add an object with a funny prototype to a persistent and it'll behave ok during this run, but the prototype won't be restored on the next run.
        <p>There's no protection for the case that the user closes the window while background persistence jobs are still going on. For most programs this is highly unlikely because you won't be firing off huge persistence jobs, but if it is a concern, you can roll your own journalling checks. For instance, you'll gradually write the new version of the sub-object in a temporary place, atomically write that it's the important one, and then gradually delete the old one. The UI thread will have returned to responsiveness much earlier than this. If there's demand for rhaboo to do this kind of thing itself, then it'll be developed.</dd>
        <dt>What can it do that most libraries can't?</dt>
        <dd><p>Most libraries either force you to learn a new storage paradigm or limit themselves to single-level maps like what localStorage already gives you. 
        <p>Some libraries store multi-level objects by stringifying and parsing the whole thing, but that's very slow if you just want to add a thousandth element to a list. Furthermore, they suffer the limitations of JSON, namely, that non-numerically named properties of arrays are dropped and sparse entries are filled with nulls. This is very different from objects or arrays in memory where null, undefined and non-existent are all different states for a property. This causes hard to diagnose bugs.
        <p>Other libraries switch between underlying persistence mechanisms according to what the browser can do, but there's no advantage in that for the programmer. You still have to decide whether your program is so simple that raw localStorage will do, or so complex that you'll need WebSQL polyfill, or somewhere in between. You have to decide what paradigm you want to think in, and having done so, you'll want a library that does exactly that and no more.  
        <p>The overwhelming advantage of rhaboo is that by simply replacing your assignments with <code>write</code> calls one-to-one, you can completely forget about the whole persistence issue.</dd>
        <dt>Why do I need to use <code>store.write('key', val)</code> instead of just <code>store.key=val</code>?</dt>
        <dd><p>Because there's no way of overriding assignment in the case that <code>key</code> is something new.</dd>
        <dt></dt>
        <dd></dd>
        <dt></dt>
        <dd></dd>
        <dt></dt>
        <dd></dd>
        

 
      


      </dl>
    </div>
